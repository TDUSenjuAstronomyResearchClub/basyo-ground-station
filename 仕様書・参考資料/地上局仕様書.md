# 地上局仕様書

## 想定使用用途

機体から送られてきた値をパソコンの画面に任意の形で表示させる

## 必要な機能

- カメラの画像と撮影日時を画面上に表示する
  - 過去の画像と撮影日時も見られるようにする
- 機体から送られてきた最新のセンサ値を一覧で表示する
  - 新しい値が届いたらその都度更新する
- 機体に送信するコマンドを記入する場所を画面上に確保する
  - 送信ボタンなどを送ればそのコマンドが機体に送ることができる
- 機体に送信するコマンドの一覧を画面に表示しておく
  - コマンドの意味も簡略に書いておく
- 機体から送信されてきた緯度経度をマップに落とし込み、走行ルートを線で結び、画面出力する
- 9軸センサの値から現在の機体の姿勢をリアルタイムで描画し、画面出力する
- 各センサの値をグラフにし、画面出力する
  - カメラ以外の値をグラフにする
- 地上局が受け取った値についてcsvファイル形式でログを残し、取り出せるようにする
- 地上局の画面構成についてのイメージ図は「地上局のUIイメージ図.png」というファイルを参照

## 処理の流れ

センサ値の先頭についている文字は以下のように分ける

| クラス１（センサー名） | クラス２ | データ |
| --- | --- | --- |
| このjsonファイルに入っているデータの種類 | --- | センサデータ（土壌水分・カメラモジュール・機体から送信されたメッセージは格納されない）　or 土壌水分データ　or　カメラモジュールデータ or　機体から送信されたメッセージ|
| GPS | --- | 緯度経度・海抜 |
| GPS | サンプル | サンプル採取地点との直線距離・方位角 |
| GPS | ゴール |ゴールとの直線距離・方位角 |
| 9軸センサ | 加速度 | X,Y,Z |
| 9軸センサ | 角速度 | X,Y,Z |
| 9軸センサ | --- | 方位角 |
| 温湿度気圧センサ | --- | 温度・湿度・気圧 |
| 気圧センサ | --- | 温度・気圧・高度 |
| 電池残量計 | --- | 電池残量値 |
| 距離センサ | --- | 障害物との距離の値 |
| 土壌水分センサ | ---| 土壌水分率 |
| カメラモジュール | --- | 画像データ |
| 機体から送信されたメッセージ | --- | 機体からのメッセージ |

1. Xbeeで機体からJSON形式でセンサ値を受け取る
2. jsonファイルに入っているデータの種類を読み取る
3. データの種類からその部分のデータのみ読み取る
4. 読み取ったデータを画面の所定の場所に出力する

## 無線機（Xbee）XB24CZ7WIT-004

秋月のリンク
<https://akizukidenshi.com/catalog/g/gM-10072/>
